<div class="concept-page">
  <div class="concept-header">
    <h1>âš¡ Transformer</h1>
    <p class="subtitle">é©å‘½æ€§çš„æ³¨æ„åŠ›æœºåˆ¶æ¶æ„</p>
  </div>

  <div class="concept-content">
    <section id="theory" class="content-section">
      <h2 class="section-title">
        <span class="section-icon">ğŸ“š</span>
        ç†è®ºåŸºç¡€
      </h2>
      <div class="theory-content">
        <h3>ä»€ä¹ˆæ˜¯Transformerï¼Ÿ</h3>
        <p>Transformeræ˜¯2017å¹´ç”±Googleæå‡ºçš„ä¸€ç§é©å‘½æ€§ç¥ç»ç½‘ç»œæ¶æ„ï¼Œå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶ï¼Œå½»åº•æ”¹å˜äº†è‡ªç„¶è¯­è¨€å¤„ç†å’ŒAIé¢†åŸŸã€‚</p>
        
        <div class="highlight-box">
          <h4>ğŸ¯ æ ¸å¿ƒåˆ›æ–°</h4>
          <ul>
            <li><strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶(Self-Attention)</strong>ï¼šæ¨¡å‹èƒ½å…³æ³¨è¾“å…¥åºåˆ—çš„ä¸åŒéƒ¨åˆ†</li>
            <li><strong>å¹¶è¡Œè®¡ç®—</strong>ï¼šä¸ä¾èµ–åºåˆ—é¡ºåºï¼Œå¯ä»¥å¹¶è¡Œå¤„ç†æ‰€æœ‰ä½ç½®</li>
            <li><strong>ä½ç½®ç¼–ç </strong>ï¼šé€šè¿‡æ•°å­¦ç¼–ç ä¿ç•™åºåˆ—çš„ä½ç½®ä¿¡æ¯</li>
            <li><strong>å¤šå¤´æ³¨æ„åŠ›</strong>ï¼šä»å¤šä¸ªè§’åº¦åŒæ—¶ç†è§£è¾“å…¥ä¿¡æ¯</li>
          </ul>
        </div>

        <h3>æ ¸å¿ƒæ¶æ„ç»„æˆ</h3>
        <p><strong>ç¼–ç å™¨-è§£ç å™¨ç»“æ„</strong>ï¼šç¼–ç å™¨ç†è§£è¾“å…¥åºåˆ—ï¼Œè§£ç å™¨ç”Ÿæˆè¾“å‡ºåºåˆ—</p>
        <p><strong>å¤šå¤´æ³¨æ„åŠ›å±‚</strong>ï¼šåŒ…æ‹¬Self-Attentionå’ŒCross-Attentionæœºåˆ¶</p>
        <p><strong>å‰é¦ˆç¥ç»ç½‘ç»œ</strong>ï¼šå¯¹æ¯ä¸ªä½ç½®ç‹¬ç«‹åº”ç”¨çš„å…¨è¿æ¥å±‚</p>
        <p><strong>æ®‹å·®è¿æ¥ä¸å±‚å½’ä¸€åŒ–</strong>ï¼šå¸®åŠ©è®­ç»ƒæ·±å±‚ç½‘ç»œï¼Œé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±</p>

        <h3>æ³¨æ„åŠ›æœºåˆ¶åŸç†</h3>
        <div class="code-block">
          <pre><code>Attention(Q,K,V) = softmax(QK^T/âˆšd_k)V

å…¶ä¸­ï¼š
- Q (Query): æŸ¥è¯¢çŸ©é˜µ
- K (Key): é”®çŸ©é˜µ  
- V (Value): å€¼çŸ©é˜µ
- d_k: é”®å‘é‡çš„ç»´åº¦</code></pre>
        </div>

        <h3>å…³é”®ä¼˜åŠ¿</h3>
        <ul>
          <li><strong>é•¿è·ç¦»ä¾èµ–å»ºæ¨¡</strong>ï¼šèƒ½å¤Ÿæ•æ‰åºåˆ—ä¸­ä»»æ„ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„å…³ç³»</li>
          <li><strong>å¹¶è¡ŒåŒ–è®­ç»ƒ</strong>ï¼šç›¸æ¯”RNNå¤§å¹…æå‡è®­ç»ƒé€Ÿåº¦</li>
          <li><strong>å¯è§£é‡Šæ€§</strong>ï¼šæ³¨æ„åŠ›æƒé‡æä¾›æ¨¡å‹å†³ç­–çš„ç›´è§‚è§£é‡Š</li>
          <li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ˜“äºæ‰©å±•åˆ°å¤§è§„æ¨¡æ¨¡å‹(å¦‚GPTã€BERT)</li>
        </ul>
      </div>
    </section>

    <section id="visualization" class="content-section">
      <h2 class="section-title">
        <span class="section-icon">ğŸ¨</span>
        å¯è§†åŒ–æ¼”ç¤º
      </h2>
      
      <!-- æ¼”ç¤º1ï¼šæ³¨æ„åŠ›æœºåˆ¶å¯è§†åŒ– -->
      <div class="visualization-container">
        <div class="visualization-header">
          <h3>æ¼”ç¤º1ï¼šæ³¨æ„åŠ›æœºåˆ¶å¯è§†åŒ–</h3>
          <p class="visualization-description">è§‚å¯ŸTransformerå¦‚ä½•å…³æ³¨è¾“å…¥åºåˆ—çš„ä¸åŒéƒ¨åˆ†</p>
        </div>
        <div id="transformer-demo" class="demo-area">
          <div class="attention-demo">
            <div class="input-sequence">
              <h4>è¾“å…¥åºåˆ—</h4>
              <div class="tokens">
                <span class="token" data-pos="0">The</span>
                <span class="token" data-pos="1">cat</span>
                <span class="token" data-pos="2">sat</span>
                <span class="token" data-pos="3">on</span>
                <span class="token" data-pos="4">the</span>
                <span class="token" data-pos="5">mat</span>
              </div>
            </div>
            
            <div class="attention-matrix">
              <h4>æ³¨æ„åŠ›æƒé‡çŸ©é˜µ</h4>
              <div class="matrix-container">
                <div class="attention-grid" id="attention-grid">
                  <!-- æ³¨æ„åŠ›çŸ©é˜µå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
              </div>
            </div>
            
            <div class="output-sequence">
              <h4>è¾“å‡ºè¡¨ç¤º</h4>
              <div class="representations">
                <div class="repr" data-pos="0">hâ‚</div>
                <div class="repr" data-pos="1">hâ‚‚</div>
                <div class="repr" data-pos="2">hâ‚ƒ</div>
                <div class="repr" data-pos="3">hâ‚„</div>
                <div class="repr" data-pos="4">hâ‚…</div>
                <div class="repr" data-pos="5">hâ‚†</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="controls">
          <button class="btn btn-primary" id="compute-attention">è®¡ç®—æ³¨æ„åŠ›</button>
          <button class="btn btn-secondary" id="highlight-token">é«˜äº®è¯è¯­å…³ç³»</button>
          <button class="btn btn-secondary" id="reset-demo">é‡ç½®æ¼”ç¤º</button>
        </div>

        <div class="demo-explanation">
          <h4>ğŸ” æ³¨æ„åŠ›æœºåˆ¶è¯´æ˜</h4>
          <p>é¢œè‰²æ·±åº¦è¡¨ç¤ºæ³¨æ„åŠ›æƒé‡å¼ºåº¦ã€‚å½“è®¡ç®—"cat"çš„è¡¨ç¤ºæ—¶ï¼Œæ¨¡å‹ä¼šå…³æ³¨æ‰€æœ‰è¾“å…¥è¯è¯­ï¼Œä½†å¯¹ç›¸å…³è¯è¯­ï¼ˆå¦‚"sat"ã€"mat"ï¼‰ç»™äºˆæ›´é«˜æƒé‡ã€‚</p>
        </div>
      </div>

      <!-- æ¼”ç¤º2ï¼šTransformerå·¥ä½œæµç¨‹æ¼”ç¤º -->
      <div class="visualization-container" style="margin-top: 3rem;">
        <div class="visualization-header">
          <h3>æ¼”ç¤º2ï¼šTransformerå®Œæ•´å·¥ä½œæµç¨‹</h3>
          <p class="visualization-description">é€æ­¥äº†è§£Transformerå¦‚ä½•å¤„ç†è¾“å…¥åºåˆ—</p>
        </div>
        
        <div class="transformer-pipeline">
          <div class="pipeline-step" id="pipeline-step-1">
            <h4>ç¬¬ 1 æ­¥ï¼šè¾“å…¥å¥å­</h4>
            <div class="step-content">
              <input type="text" id="inputText" value="çŒ« å–œæ¬¢ åƒ é±¼" placeholder="è¾“å…¥è¯è¯­ï¼ˆç”¨ç©ºæ ¼åˆ†éš”ï¼‰" class="pipeline-input">
              <button onclick="processTransformerPipeline()" class="btn btn-primary">å¼€å§‹å¤„ç†</button>
            </div>
          </div>

          <div class="pipeline-step" id="pipeline-step-2" style="display:none">
            <h4>ç¬¬ 2 æ­¥ï¼šè¯åµŒå…¥ç¼–ç </h4>
            <p class="step-description">æ¯ä¸ªè¯è¢«è½¬åŒ–ä¸ºé«˜ç»´æ•°å­—å‘é‡</p>
            <div id="embeddingOutput" class="step-output"></div>
          </div>

          <div class="pipeline-step" id="pipeline-step-3" style="display:none">
            <h4>ç¬¬ 3 æ­¥ï¼šä½ç½®ç¼–ç </h4>
            <p class="step-description">ä¸ºæ¯ä¸ªå‘é‡æ·»åŠ ä½ç½®ä¿¡æ¯ï¼Œä¿ç•™åºåˆ—é¡ºåº</p>
            <div id="positionOutput" class="step-output"></div>
          </div>

          <div class="pipeline-step" id="pipeline-step-4" style="display:none">
            <h4>ç¬¬ 4 æ­¥ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶</h4>
            <p class="step-description">æ¯ä¸ªè¯æ ¹æ®ä¸å…¶ä»–è¯çš„å…³è”åº¦é‡æ–°è°ƒæ•´è¡¨ç¤º</p>
            <div id="attentionOutput" class="step-output"></div>
          </div>

          <div class="pipeline-step" id="pipeline-step-5" style="display:none">
            <h4>ç¬¬ 5 æ­¥ï¼šæœ€ç»ˆè¾“å‡º</h4>
            <p class="step-description">è¯å‘é‡å·²èåˆæ•´å¥ä¸Šä¸‹æ–‡ä¿¡æ¯</p>
            <div id="finalOutput" class="step-output"></div>
          </div>
        </div>

        <div class="pipeline-explanation">
          <h4>ğŸ”§ å¤„ç†æµç¨‹è¯´æ˜</h4>
          <p>Transformeré€šè¿‡è¿™5ä¸ªæ­¥éª¤ï¼Œå°†è¾“å…¥çš„è¯è¯­åºåˆ—è½¬æ¢ä¸ºåŒ…å«ä¸°å¯Œä¸Šä¸‹æ–‡ä¿¡æ¯çš„å‘é‡è¡¨ç¤ºã€‚æ¯ä¸€æ­¥éƒ½åœ¨é€æ¸å¢å¼ºæ¨¡å‹å¯¹å¥å­å«ä¹‰çš„ç†è§£ã€‚</p>
        </div>
      </div>
    </section>

    <section id="practice" class="content-section">
      <h2 class="section-title">
        <span class="section-icon">ğŸ¯</span>
        å®è·µç»ƒä¹ 
      </h2>
      <div class="practice-content">
        <div class="exercise-container">
          <h3>ç»ƒä¹ 1ï¼šæ„å»ºç®€å•çš„æ³¨æ„åŠ›æœºåˆ¶</h3>
          <p>ç†è§£Queryã€Keyã€ValueçŸ©é˜µçš„ä½œç”¨</p>
          <div class="exercise-placeholder">
            <p>ğŸ§® æ³¨æ„åŠ›è®¡ç®—ç»ƒä¹ å³å°†æ¨å‡º</p>
          </div>
        </div>

        <div class="exercise-container">
          <h3>ç»ƒä¹ 2ï¼šå¤šå¤´æ³¨æ„åŠ›å¯è§†åŒ–</h3>
          <p>è§‚å¯Ÿä¸åŒæ³¨æ„åŠ›å¤´å…³æ³¨çš„æ¨¡å¼</p>
          <div class="exercise-placeholder">
            <p>ğŸ” å¤šå¤´æ³¨æ„åŠ›ç»ƒä¹ å³å°†æ¨å‡º</p>
          </div>
        </div>

        <div class="exercise-container">
          <h3>ç»ƒä¹ 3ï¼šä½ç½®ç¼–ç å®éªŒ</h3>
          <p>äº†è§£ä½ç½®ä¿¡æ¯å¦‚ä½•å½±å“æ¨¡å‹ç†è§£</p>
          <div class="exercise-placeholder">
            <p>ğŸ“ ä½ç½®ç¼–ç ç»ƒä¹ å³å°†æ¨å‡º</p>
          </div>
        </div>
      </div>
    </section>

    <section id="summary" class="content-section">
      <h2 class="section-title">
        <span class="section-icon">ğŸ“</span>
        æ€»ç»“
      </h2>
      <div class="summary-content">
        <div class="highlight-box">
          <h4>ğŸ”‘ å…³é”®è¦ç‚¹</h4>
          <ul>
            <li><strong>æ³¨æ„åŠ›é©å‘½</strong>ï¼šå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶ï¼ŒæŠ›å¼ƒäº†å¾ªç¯ç»“æ„</li>
            <li><strong>å¹¶è¡Œè®¡ç®—</strong>ï¼šå¤§å¹…æå‡è®­ç»ƒæ•ˆç‡å’Œæ¨¡å‹è§„æ¨¡</li>
            <li><strong>é•¿è·ç¦»å»ºæ¨¡</strong>ï¼šèƒ½å¤Ÿæ•æ‰åºåˆ—ä¸­ä»»æ„è·ç¦»çš„ä¾èµ–å…³ç³»</li>
            <li><strong>æ¶æ„åŸºç¡€</strong>ï¼šç°ä»£å¤§æ¨¡å‹(GPTã€BERTç­‰)çš„æ ¸å¿ƒæ¶æ„</li>
          </ul>
        </div>
        
        <h3>ğŸŒŸ é‡è¦é‡Œç¨‹ç¢‘</h3>
        <div class="timeline">
          <div class="timeline-item">
            <h4>2017å¹´</h4>
            <p>ã€ŠAttention Is All You Needã€‹è®ºæ–‡å‘å¸ƒï¼Œæå‡ºTransformeræ¶æ„</p>
          </div>
          <div class="timeline-item">
            <h4>2018å¹´</h4>
            <p>BERTæ¨¡å‹å‘å¸ƒï¼Œå±•ç¤ºTransformeråœ¨ç†è§£ä»»åŠ¡ä¸Šçš„å¼ºå¤§èƒ½åŠ›</p>
          </div>
          <div class="timeline-item">
            <h4>2019å¹´</h4>
            <p>GPT-2å‘å¸ƒï¼Œæ˜¾ç¤ºTransformeråœ¨ç”Ÿæˆä»»åŠ¡ä¸Šçš„æ½œåŠ›</p>
          </div>
          <div class="timeline-item">
            <h4>2020å¹´+</h4>
            <p>GPT-3ã€GPT-4ç­‰å¤§æ¨¡å‹å±•ç°äº†å‰æ‰€æœªæœ‰çš„èƒ½åŠ›</p>
          </div>
        </div>

        <h3>ğŸš€ é‡è¦åº”ç”¨</h3>
        <div class="application-grid">
          <div class="application-item">
            <h4>ğŸ¤– å¤§è¯­è¨€æ¨¡å‹</h4>
            <p>GPTç³»åˆ—ã€ChatGPTã€Claudeç­‰</p>
          </div>
          <div class="application-item">
            <h4>ğŸ” æœç´¢ç†è§£</h4>
            <p>BERTåœ¨Googleæœç´¢ä¸­çš„åº”ç”¨</p>
          </div>
          <div class="application-item">
            <h4>ğŸŒ æœºå™¨ç¿»è¯‘</h4>
            <p>Google Translateç­‰ç¿»è¯‘æœåŠ¡</p>
          </div>
          <div class="application-item">
            <h4>ğŸ¨ å¤šæ¨¡æ€AI</h4>
            <p>CLIPã€DALL-Eç­‰è·¨æ¨¡æ€æ¨¡å‹</p>
          </div>
        </div>

        <h3>ğŸ’¡ å­¦ä¹ å»ºè®®</h3>
        <ol>
          <li><strong>ç†è§£æ³¨æ„åŠ›æœºåˆ¶</strong>ï¼šä»æ•°å­¦å…¬å¼å¼€å§‹ï¼Œç†è§£QKVçš„ä½œç”¨</li>
          <li><strong>æŒæ¡æ¶æ„ç»†èŠ‚</strong>ï¼šç¼–ç å™¨-è§£ç å™¨ã€å¤šå¤´æ³¨æ„åŠ›ã€æ®‹å·®è¿æ¥</li>
          <li><strong>å®è·µç¼–ç¨‹</strong>ï¼šä½¿ç”¨PyTorchæˆ–TensorFlowå®ç°ç®€å•çš„Transformer</li>
          <li><strong>è·Ÿè¿›å‘å±•</strong>ï¼šå…³æ³¨GPTã€BERTç­‰æ¨¡å‹çš„æœ€æ–°è¿›å±•</li>
          <li><strong>ç†è§£åº”ç”¨</strong>ï¼šå­¦ä¹ å¦‚ä½•å°†Transformeråº”ç”¨åˆ°å®é™…é—®é¢˜</li>
        </ol>

        <div class="next-steps">
          <h4>ğŸ¯ è¿›é˜¶å­¦ä¹ è·¯å¾„</h4>
          <p>æŒæ¡Transformeråï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ï¼š</p>
          <ul>
            <li><strong>BERTç³»åˆ—</strong>ï¼šåŒå‘ç¼–ç å™¨ï¼Œç†è§£ç±»ä»»åŠ¡ä¸“å®¶</li>
            <li><strong>GPTç³»åˆ—</strong>ï¼šç”Ÿæˆå¼é¢„è®­ç»ƒï¼Œè¯­è¨€ç”Ÿæˆä¸“å®¶</li>
            <li><strong>Vision Transformer</strong>ï¼šå°†Transformeråº”ç”¨åˆ°è®¡ç®—æœºè§†è§‰</li>
            <li><strong>ä¼˜åŒ–æŠ€æœ¯</strong>ï¼šç¨€ç–æ³¨æ„åŠ›ã€é«˜æ•ˆTransformerç­‰</li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- Transformer Pipeline JavaScript -->
<script>
// æ¨¡æ‹Ÿå‘é‡ç”Ÿæˆï¼ˆå®é™…ä¸ºæ•°ç™¾ä½æ•°å­—ï¼Œè¿™é‡Œç®€åŒ–ä¸º3ä½ï¼‰
function wordToVector(word) {
  // å®é™…æ¨¡å‹ä¼šä½¿ç”¨é¢„è®­ç»ƒçš„è¯åµŒå…¥
  const vectors = {
    "çŒ«": [0.8, -0.2, 0.5],
    "å–œæ¬¢": [-0.3, 0.7, 0.1],
    "åƒ": [0.1, 0.5, -0.9],
    "é±¼": [0.6, -0.4, 0.3],
    "The": [0.7, -0.1, 0.4],
    "cat": [0.8, -0.2, 0.5],
    "sat": [0.2, 0.6, -0.3],
    "on": [-0.1, 0.3, 0.8],
    "the": [0.7, -0.1, 0.4],
    "mat": [0.4, 0.2, -0.6]
  };
  return vectors[word] || [
    (Math.random() * 2 - 1).toFixed(1), 
    (Math.random() * 2 - 1).toFixed(1), 
    (Math.random() * 2 - 1).toFixed(1)
  ];
}

// æ¨¡æ‹Ÿä½ç½®ç¼–ç ï¼ˆå®é™…ä½¿ç”¨æ­£å¼¦å‡½æ•°ï¼‰
function addPosition(vector, index) {
  const position = [index * 0.1, (index+1) * 0.2, (index+2) * 0.3];
  return vector.map((v, i) => (parseFloat(v) + position[i]).toFixed(1));
}

// æ¨¡æ‹Ÿè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆç®€åŒ–ç‰ˆï¼‰
function calculateAttention(vectors) {
  // å®é™…æ¨¡å‹ä½¿ç”¨ Q,K,V çŸ©é˜µè®¡ç®—
  return vectors.map(v => v.map(num => (parseFloat(num) * 1.5).toFixed(1)));
}

// ä¸»å¤„ç†å‡½æ•°
function processTransformerPipeline() {
  const input = document.getElementById("inputText").value.split(" ").filter(word => word.trim());
  if (input.length === 0) return;
  
  // é‡ç½®æ‰€æœ‰æ­¥éª¤
  for (let i = 2; i <= 5; i++) {
    document.getElementById(`pipeline-step-${i}`).style.display = 'none';
  }
  
  showPipelineStep(2);
  
  // 1. è¯ â†’ å‘é‡
  const embeddings = input.map(word => wordToVector(word));
  displayPipelineResult(input, embeddings, "embeddingOutput", "#4e8cff");

  // 2. æ·»åŠ ä½ç½®ç¼–ç 
  setTimeout(() => {
    showPipelineStep(3);
    const positioned = embeddings.map((vec, i) => addPosition(vec, i));
    displayPipelineResult(input, positioned, "positionOutput", "#ff6b6b");
    
    // 3. è‡ªæ³¨æ„åŠ›è®¡ç®—
    setTimeout(() => {
      showPipelineStep(4);
      const attentionApplied = calculateAttention(positioned);
      displayPipelineResult(input, attentionApplied, "attentionOutput", "#48db71");
      
      // 4. æœ€ç»ˆè¾“å‡º
      setTimeout(() => {
        showPipelineStep(5);
        const finalVectors = calculateAttention(attentionApplied);
        displayPipelineResult(input, finalVectors, "finalOutput", "#9b59b6");
      }, 1500);
    }, 1500);
  }, 1500);
}

// é€šç”¨æ˜¾ç¤ºå‡½æ•°
function displayPipelineResult(words, vectors, elementId, color) {
  const container = document.getElementById(elementId);
  container.innerHTML = '';
  words.forEach((word, i) => {
    const div = document.createElement("div");
    div.className = "token-vector-pair";
    div.innerHTML = `
      <span class="pipeline-token" style="background: ${color}">${word}</span>
      <span class="vector-display">â†’ [${vectors[i].join(", ")}]</span>
    `;
    container.appendChild(div);
  });
}

function showPipelineStep(stepNum) {
  for (let i = 1; i <= stepNum; i++) {
    document.getElementById(`pipeline-step-${i}`).style.display = 'block';
  }
}
</script>

<!-- æ–°å¢CSSæ ·å¼ -->
<style>
.transformer-pipeline {
  background: var(--background-color);
  border-radius: 12px;
  padding: 2rem;
  margin: 1.5rem 0;
}

.pipeline-step {
  background: rgba(78, 140, 255, 0.05);
  padding: 1.5rem;
  margin: 1rem 0;
  border-radius: 8px;
  border-left: 4px solid var(--accent-color);
  transition: all 0.3s ease;
}

.pipeline-step h4 {
  color: var(--accent-color);
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.step-description {
  color: var(--text-secondary);
  margin-bottom: 1rem;
  font-size: 0.9rem;
}

.step-content {
  display: flex;
  gap: 1rem;
  align-items: center;
  flex-wrap: wrap;
}

.pipeline-input {
  flex: 1;
  min-width: 200px;
  padding: 0.8rem;
  border: 2px solid var(--border-color);
  border-radius: 6px;
  font-size: 1rem;
  background: var(--card-background);
  color: var(--text-color);
  transition: border-color 0.3s ease;
}

.pipeline-input:focus {
  outline: none;
  border-color: var(--accent-color);
}

.step-output {
  margin-top: 1rem;
}

.token-vector-pair {
  display: flex;
  align-items: center;
  margin: 0.5rem 0;
  padding: 0.5rem;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 6px;
}

.pipeline-token {
  display: inline-block;
  padding: 0.4rem 0.8rem;
  color: white;
  border-radius: 4px;
  margin-right: 1rem;
  font-weight: 500;
  min-width: 60px;
  text-align: center;
}

.vector-display {
  font-family: 'Courier New', monospace;
  font-size: 0.85rem;
  color: var(--text-secondary);
  background: rgba(0, 0, 0, 0.05);
  padding: 0.3rem 0.6rem;
  border-radius: 4px;
}

.pipeline-explanation {
  margin-top: 2rem;
  padding: 1.5rem;
  background: rgba(72, 219, 113, 0.1);
  border-radius: 8px;
  border-left: 4px solid #48db71;
}

.pipeline-explanation h4 {
  color: #48db71;
  margin-bottom: 0.5rem;
}

.visualization-container + .visualization-container {
  border-top: 2px solid var(--border-color);
  padding-top: 2rem;
}

/* æ·±è‰²ä¸»é¢˜é€‚é… */
[data-theme="dark"] .pipeline-step {
  background: rgba(78, 140, 255, 0.1);
}

[data-theme="dark"] .token-vector-pair {
  background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .vector-display {
  background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .pipeline-explanation {
  background: rgba(72, 219, 113, 0.1);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .step-content {
    flex-direction: column;
    align-items: stretch;
  }
  
  .pipeline-input {
    min-width: unset;
  }
  
  .token-vector-pair {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .pipeline-token {
    margin-right: 0;
  }
}
</style>
